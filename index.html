<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FALANGS - Real-time Language Translator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body { background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); min-height: 100vh; display: flex; justify-content: center; align-items: center; padding: 20px; }
        .container { background: #1e293b; border-radius: 20px; box-shadow: 0 15px 30px rgba(0,0,0,0.4); width: 100%; max-width: 1200px; overflow: hidden; border: 1px solid #334155; }
        header { background: linear-gradient(90deg, #1e40af, #3b82f6); color: white; padding: 30px; text-align: center; }
        header h1 { font-size: 2.5rem; margin-bottom: 10px; font-weight: 700; letter-spacing: 1px; }
        header p { opacity: 0.9; font-size: 1.1rem; }
        .translator-container { padding: 30px; }
        .language-controls { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; gap: 15px; }
        .language-selector { display: flex; align-items: center; gap: 10px; background: #334155; padding: 12px 20px; border-radius: 50px; flex: 1; transition: all 0.3s; }
        .language-selector:hover { background: #475569; }
        select { padding: 8px 12px; border: 1px solid #475569; border-radius: 8px; background: #1e293b; color: #e2e8f0; font-size: 1rem; flex: 1; cursor: pointer; transition: all 0.3s; }
        select:hover { border-color: #60a5fa; }
        select:focus { outline: none; border-color: #3b82f6; box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.3); }
        .swap-btn { background: #3b82f6; color: white; border: none; border-radius: 50%; width: 50px; height: 50px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.3s; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .swap-btn:hover { background: #1e40af; transform: rotate(180deg); box-shadow: 0 6px 8px rgba(0,0,0,0.2); }
        .text-areas { display: grid; grid-template-columns: 1fr 1fr; gap: 25px; margin-bottom: 25px; }
        @media (max-width: 768px) { .text-areas { grid-template-columns: 1fr; } }
        .input-section, .output-section { display: flex; flex-direction: column; }
        .section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
        .section-header h2 { color: #60a5fa; font-size: 1.3rem; font-weight: 600; }
        .char-count { color: #94a3b8; font-size: 0.9rem; }
        textarea { flex: 1; padding: 20px; border: 2px solid #475569; border-radius: 12px; font-size: 1.1rem; resize: none; transition: border-color 0.3s; background: #1e293b; color: #e2e8f0; min-height: 250px; }
        textarea:focus { outline: none; border-color: #3b82f6; box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.3); }
        .output-text { flex: 1; padding: 20px; border: 2px solid #475569; border-radius: 12px; background: #1e293b; font-size: 1.1rem; line-height: 1.6; overflow-y: auto; color: #e2e8f0; min-height: 250px; position: relative; }
        
        /* TTS Button */
        .tts-btn { position: absolute; top: 15px; right: 15px; background: #3b82f6; color: white; border: none; border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.3s; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        .tts-btn:hover { background: #1e40af; transform: scale(1.1); }
        .tts-btn:disabled { background: #475569; cursor: not-allowed; transform: none; }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #334155; border-radius: 4px; }
        ::-webkit-scrollbar-thumb { background: #3b82f6; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #1e40af; }
        
        .controls { display: flex; justify-content: center; gap: 15px; margin: 25px 0; }
        button { padding: 12px 30px; border: none; border-radius: 50px; font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; gap: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        #clear-btn { background: #334155; color: #e2e8f0; border: 2px solid #475569; }
        #clear-btn:hover { background: #475569; transform: translateY(-2px); box-shadow: 0 6px 12px rgba(0,0,0,0.2); }
        .status { text-align: center; padding: 12px; border-radius: 8px; margin-top: 15px; font-weight: 500; }
        .status.success { background: rgba(21, 128, 61, 0.2); color: #86efac; border: 1px solid rgba(21, 128, 61, 0.5); }
        .status.error { background: rgba(185, 28, 28, 0.2); color: #fca5a5; border: 1px solid rgba(185, 28, 28, 0.5); }
        .loading { display: none; text-align: center; margin: 20px 0; }
        .spinner { border: 4px solid #334155; border-top: 4px solid #3b82f6; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 0 auto 10px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        footer { text-align: center; padding: 20px; background: #0f172a; color: #94a3b8; }
        .real-time-indicator { display: flex; align-items: center; justify-content: center; gap: 8px; margin-top: 10px; color: #60a5fa; font-size: 0.9rem; }
        .pulse-dot { width: 8px; height: 8px; border-radius: 50%; background: #60a5fa; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }
    </style>
</head>
<body>
<div class="container">
    <header>
        <h1>FALANGS</h1>
        <p>Real-time translation between all supported languages</p>
    </header>
    
    <div class="translator-container">
        <div class="language-controls">
            <div class="language-selector">
                <label for="source-lang">From:</label>
                <select id="source-lang">
                    <option value="auto">Auto Detect</option>
                    <option value="af">Afrikaans</option>
                    <option value="sq">Albanian</option>
                    <option value="am">Amharic</option>
                    <option value="ar">Arabic</option>
                    <option value="hy">Armenian</option>
                    <option value="az">Azerbaijani</option>
                    <option value="eu">Basque</option>
                    <option value="be">Belarusian</option>
                    <option value="bn">Bengali</option>
                    <option value="bs">Bosnian</option>
                    <option value="bg">Bulgarian</option>
                    <option value="ca">Catalan</option>
                    <option value="ceb">Cebuano</option>
                    <option value="ny">Chichewa</option>
                    <option value="zh">Chinese (Simplified)</option>
                    <option value="zh-TW">Chinese (Traditional)</option>
                    <option value="co">Corsican</option>
                    <option value="hr">Croatian</option>
                    <option value="cs">Czech</option>
                    <option value="da">Danish</option>
                    <option value="nl">Dutch</option>
                    <option value="en">English</option>
                    <option value="eo">Esperanto</option>
                    <option value="et">Estonian</option>
                    <option value="tl">Filipino</option>
                    <option value="fi">Finnish</option>
                    <option value="fr">French</option>
                    <option value="fy">Frisian</option>
                    <option value="gl">Galician</option>
                    <option value="ka">Georgian</option>
                    <option value="de">German</option>
                    <option value="el">Greek</option>
                    <option value="gu">Gujarati</option>
                    <option value="ht">Haitian Creole</option>
                    <option value="ha">Hausa</option>
                    <option value="haw">Hawaiian</option>
                    <option value="he">Hebrew</option>
                    <option value="hi">Hindi</option>
                    <option value="hmn">Hmong</option>
                    <option value="hu">Hungarian</option>
                    <option value="is">Icelandic</option>
                    <option value="ig">Igbo</option>
                    <option value="id">Indonesian</option>
                    <option value="ga">Irish</option>
                    <option value="it">Italian</option>
                    <option value="ja">Japanese</option>
                    <option value="jw">Javanese</option>
                    <option value="kn">Kannada</option>
                    <option value="kk">Kazakh</option>
                    <option value="km">Khmer</option>
                    <option value="ko">Korean</option>
                    <option value="ku">Kurdish (Kurmanji)</option>
                    <option value="ky">Kyrgyz</option>
                    <option value="lo">Lao</option>
                    <option value="la">Latin</option>
                    <option value="lv">Latvian</option>
                    <option value="lt">Lithuanian</option>
                    <option value="lb">Luxembourgish</option>
                    <option value="mk">Macedonian</option>
                    <option value="mg">Malagasy</option>
                    <option value="ms">Malay</option>
                    <option value="ml">Malayalam</option>
                    <option value="mt">Maltese</option>
                    <option value="mi">Maori</option>
                    <option value="mr">Marathi</option>
                    <option value="mn">Mongolian</option>
                    <option value="my">Myanmar (Burmese)</option>
                    <option value="ne">Nepali</option>
                    <option value="no">Norwegian</option>
                    <option value="ps">Pashto</option>
                    <option value="fa">Persian</option>
                    <option value="pl">Polish</option>
                    <option value="pt">Portuguese</option>
                    <option value="pa">Punjabi</option>
                    <option value="ro">Romanian</option>
                    <option value="ru">Russian</option>
                    <option value="sm">Samoan</option>
                    <option value="gd">Scots Gaelic</option>
                    <option value="sr">Serbian</option>
                    <option value="st">Sesotho</option>
                    <option value="sn">Shona</option>
                    <option value="sd">Sindhi</option>
                    <option value="si">Sinhala</option>
                    <option value="sk">Slovak</option>
                    <option value="sl">Slovenian</option>
                    <option value="so">Somali</option>
                    <option value="es">Spanish</option>
                    <option value="su">Sundanese</option>
                    <option value="sw">Swahili</option>
                    <option value="sv">Swedish</option>
                    <option value="tg">Tajik</option>
                    <option value="ta">Tamil</option>
                    <option value="te">Telugu</option>
                    <option value="th">Thai</option>
                    <option value="tr">Turkish</option>
                    <option value="uk">Ukrainian</option>
                    <option value="ur">Urdu</option>
                    <option value="uz">Uzbek</option>
                    <option value="vi">Vietnamese</option>
                    <option value="cy">Welsh</option>
                    <option value="xh">Xhosa</option>
                    <option value="yi">Yiddish</option>
                    <option value="yo">Yoruba</option>
                    <option value="zu">Zulu</option>
                </select>
            </div>
            
            <button class="swap-btn" id="swap-langs" title="Swap languages">⇄</button>
            
            <div class="language-selector">
                <label for="target-lang">To:</label>
                <select id="target-lang">
                    <option value="af">Afrikaans</option>
                    <option value="sq">Albanian</option>
                    <option value="am">Amharic</option>
                    <option value="ar">Arabic</option>
                    <option value="hy">Armenian</option>
                    <option value="az">Azerbaijani</option>
                    <option value="eu">Basque</option>
                    <option value="be">Belarusian</option>
                    <option value="bn">Bengali</option>
                    <option value="bs">Bosnian</option>
                    <option value="bg">Bulgarian</option>
                    <option value="ca">Catalan</option>
                    <option value="ceb">Cebuano</option>
                    <option value="ny">Chichewa</option>
                    <option value="zh">Chinese (Simplified)</option>
                    <option value="zh-TW">Chinese (Traditional)</option>
                    <option value="co">Corsican</option>
                    <option value="hr">Croatian</option>
                    <option value="cs">Czech</option>
                    <option value="da">Danish</option>
                    <option value="nl">Dutch</option>
                    <option value="en" selected>English</option>
                    <option value="eo">Esperanto</option>
                    <option value="et">Estonian</option>
                    <option value="tl">Filipino</option>
                    <option value="fi">Finnish</option>
                    <option value="fr">French</option>
                    <option value="fy">Frisian</option>
                    <option value="gl">Galician</option>
                    <option value="ka">Georgian</option>
                    <option value="de">German</option>
                    <option value="el">Greek</option>
                    <option value="gu">Gujarati</option>
                    <option value="ht">Haitian Creole</option>
                    <option value="ha">Hausa</option>
                    <option value="haw">Hawaiian</option>
                    <option value="he">Hebrew</option>
                    <option value="hi">Hindi</option>
                    <option value="hmn">Hmong</option>
                    <option value="hu">Hungarian</option>
                    <option value="is">Icelandic</option>
                    <option value="ig">Igbo</option>
                    <option value="id">Indonesian</option>
                    <option value="ga">Irish</option>
                    <option value="it">Italian</option>
                    <option value="ja">Japanese</option>
                    <option value="jw">Javanese</option>
                    <option value="kn">Kannada</option>
                    <option value="kk">Kazakh</option>
                    <option value="km">Khmer</option>
                    <option value="ko">Korean</option>
                    <option value="ku">Kurdish (Kurmanji)</option>
                    <option value="ky">Kyrgyz</option>
                    <option value="lo">Lao</option>
                    <option value="la">Latin</option>
                    <option value="lv">Latvian</option>
                    <option value="lt">Lithuanian</option>
                    <option value="lb">Luxembourgish</option>
                    <option value="mk">Macedonian</option>
                    <option value="mg">Malagasy</option>
                    <option value="ms">Malay</option>
                    <option value="ml">Malayalam</option>
                    <option value="mt">Maltese</option>
                    <option value="mi">Maori</option>
                    <option value="mr">Marathi</option>
                    <option value="mn">Mongolian</option>
                    <option value="my">Myanmar (Burmese)</option>
                    <option value="ne">Nepali</option>
                    <option value="no">Norwegian</option>
                    <option value="ps">Pashto</option>
                    <option value="fa">Persian</option>
                    <option value="pl">Polish</option>
                    <option value="pt">Portuguese</option>
                    <option value="pa">Punjabi</option>
                    <option value="ro">Romanian</option>
                    <option value="ru">Russian</option>
                    <option value="sm">Samoan</option>
                    <option value="gd">Scots Gaelic</option>
                    <option value="sr">Serbian</option>
                    <option value="st">Sesotho</option>
                    <option value="sn">Shona</option>
                    <option value="sd">Sindhi</option>
                    <option value="si">Sinhala</option>
                    <option value="sk">Slovak</option>
                    <option value="sl">Slovenian</option>
                    <option value="so">Somali</option>
                    <option value="es">Spanish</option>
                    <option value="su">Sundanese</option>
                    <option value="sw">Swahili</option>
                    <option value="sv">Swedish</option>
                    <option value="tg">Tajik</option>
                    <option value="ta">Tamil</option>
                    <option value="te">Telugu</option>
                    <option value="th">Thai</option>
                    <option value="tr">Turkish</option>
                    <option value="uk">Ukrainian</option>
                    <option value="ur">Urdu</option>
                    <option value="uz">Uzbek</option>
                    <option value="vi">Vietnamese</option>
                    <option value="cy">Welsh</option>
                    <option value="xh">Xhosa</option>
                    <option value="yi">Yiddish</option>
                    <option value="yo">Yoruba</option>
                    <option value="zu">Zulu</option>
                </select>
            </div>
        </div>
        
        <div class="text-areas">
            <div class="input-section">
                <div class="section-header">
                    <h2>Original Text</h2>
                    <div class="char-count" id="input-char-count">0 characters</div>
                </div>
                <textarea id="input-text" placeholder="Enter text to translate..."></textarea>
            </div>
            
            <div class="output-section">
                <div class="section-header">
                    <h2>Translation</h2>
                    <div class="char-count" id="output-char-count">0 characters</div>
                </div>
                <div class="output-text" id="output-text">
                    Your translation will appear here...
                    <button class="tts-btn" id="tts-btn" title="Listen to translation" disabled>
                        <i class="fas fa-volume-up"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <div class="controls">
            <button id="clear-btn">Clear All</button>
        </div>
        
        <div class="real-time-indicator">
            <div class="pulse-dot"></div>
            <span>Real-time translation active</span>
        </div>
        
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Translating...</p>
        </div>
        
        <div class="status" id="status">Enter text to see real-time translation</div>
    </div>
    
    <footer>
        <p>FALANGS &copy; 2025</p>
    </footer>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const inputText = document.getElementById('input-text');
    const outputText = document.getElementById('output-text');
    const sourceLang = document.getElementById('source-lang');
    const targetLang = document.getElementById('target-lang');
    const clearBtn = document.getElementById('clear-btn');
    const swapLangsBtn = document.getElementById('swap-langs');
    const status = document.getElementById('status');
    const loading = document.getElementById('loading');
    const inputCharCount = document.getElementById('input-char-count');
    const outputCharCount = document.getElementById('output-char-count');
    const ttsBtn = document.getElementById('tts-btn');

    const API_BASE_URL = ' https://enjoy-reed-mpg-save.trycloudflare.com    ';
    const TRANSLATE_ENDPOINT = `${API_BASE_URL}/translate`;

    let translationTimeout;
    let lastTranslatedText = '';
    
    inputText.addEventListener('input', updateCharCount);
    inputText.addEventListener('input', handleRealTimeTranslation);

    function updateCharCount() {
        const count = inputText.value.length;
        inputCharCount.textContent = `${count} character${count !== 1 ? 's' : ''}`;
    }

    function handleRealTimeTranslation() {
        const text = inputText.value.trim();
        
        // Clear previous timeout
        if (translationTimeout) {
            clearTimeout(translationTimeout);
        }
        
        // If text is empty, clear output
        if (!text) {
            outputText.textContent = 'Your translation will appear here...';
            outputCharCount.textContent = '0 characters';
            ttsBtn.disabled = true;
            return;
        }
        
        // If text hasn't changed, don't retranslate
        if (text === lastTranslatedText) {
            return;
        }
        
        // Set a timeout to avoid too many API calls
        translationTimeout = setTimeout(() => {
            translateText(text);
        }, 800); // Wait 800ms after user stops typing
    }

    async function translateText(text) {
        if (!text) return;
        
        loading.style.display = 'block';
        status.textContent = 'Translating...';

        try {
            const response = await fetch(TRANSLATE_ENDPOINT, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ 
                    text, 
                    target: targetLang.value, 
                    source: sourceLang.value === 'auto' ? null : sourceLang.value 
                })
            });
            
            if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);

            const translated = await response.text();
            outputText.textContent = translated;
            outputCharCount.textContent = `${translated.length} character${translated.length !== 1 ? 's' : ''}`;
            status.textContent = 'Translation completed successfully!';
            status.className = 'status success';
            
            // Enable TTS button if there's translated text
            ttsBtn.disabled = !translated || translated === 'Your translation will appear here...';
            
            // Store the last translated text
            lastTranslatedText = text;
        } catch (error) {
            console.error('Translation error:', error);
            outputText.textContent = 'Error: Could not translate text. Please try again.';
            status.textContent = `Translation failed: ${error.message}`;
            status.className = 'status error';
            ttsBtn.disabled = true;
        } finally {
            loading.style.display = 'none';
        }
    }

    function clearFields() {
        inputText.value = '';
        outputText.textContent = 'Your translation will appear here...';
        status.textContent = 'All fields cleared';
        status.className = 'status success';
        inputCharCount.textContent = '0 characters';
        outputCharCount.textContent = '0 characters';
        ttsBtn.disabled = true;
        lastTranslatedText = '';
        
        // Clear any pending translation timeout
        if (translationTimeout) {
            clearTimeout(translationTimeout);
        }
    }

    function swapLanguages() {
        const sourceValue = sourceLang.value;
        const targetValue = targetLang.value;
        
        if (sourceValue === 'auto') { 
            sourceLang.value = targetValue; 
            targetLang.value = 'en'; 
        } else { 
            sourceLang.value = targetValue; 
            targetLang.value = sourceValue; 
        }

        const inputValue = inputText.value;
        const outputValue = outputText.textContent;
        
        if (inputValue && outputValue && !outputValue.includes('Your translation will appear here')) {
            inputText.value = outputValue;
            outputText.textContent = inputValue;
            inputCharCount.textContent = `${outputValue.length} characters`;
            outputCharCount.textContent = `${inputValue.length} characters`;
            lastTranslatedText = outputValue;
            ttsBtn.disabled = !inputValue || inputValue === 'Your translation will appear here...';
        }
        
        status.textContent = 'Languages swapped';
        status.className = 'status success';
        
        // Trigger translation if there's text
        if (inputText.value.trim()) {
            handleRealTimeTranslation();
        }
    }

    function speakText() {
        const text = outputText.textContent;
        if (!text || text === 'Your translation will appear here...') return;
        
        // Get the target language code for speech synthesis
        const langCode = targetLang.value;
        
        // Create a speech synthesis utterance
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = langCode;
        utterance.rate = 0.9;
        utterance.pitch = 1;
        
        // Speak the text
        window.speechSynthesis.speak(utterance);
        
        // Update button state during speech
        ttsBtn.innerHTML = '<i class="fas fa-volume-mute"></i>';
        ttsBtn.disabled = true;
        
        // Reset button when speech ends
        utterance.onend = function() {
            ttsBtn.innerHTML = '<i class="fas fa-volume-up"></i>';
            ttsBtn.disabled = false;
        };
    }
    
    clearBtn.addEventListener('click', clearFields);
    swapLangsBtn.addEventListener('click', swapLanguages);
    ttsBtn.addEventListener('click', speakText);

    // Language change triggers retranslation
    sourceLang.addEventListener('change', function() {
        if (inputText.value.trim()) {
            handleRealTimeTranslation();
        }
    });
    
    targetLang.addEventListener('change', function() {
        if (inputText.value.trim()) {
            handleRealTimeTranslation();
        }
    });

    inputText.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.key === 'Enter') {
            const text = inputText.value.trim();
            if (text) {
                translateText(text);
            }
        }
    });

    updateCharCount();
});
</script>
</body>
</html>
